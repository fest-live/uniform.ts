/**
 * Request Proxy - Re-exports from Unified Proxy Module
 *
 * @deprecated Use Proxy.ts directly for new code.
 * This file is kept for backward compatibility.
 */
import { WReflectAction } from "../types/Interface";
import { createUnifiedChannel, getWorkerChannel } from "../channel/UnifiedChannel";
// Re-export from unified Proxy module
export { 
// Symbols
PROXY_MARKER, PROXY_INTERNALS, 
// Classes
RemoteProxyHandler, DispatchProxyHandler, ProxyBuilder, 
// Factory functions
createRemoteProxy, wrapDescriptor, isRemoteProxy, getProxyDescriptor, getProxyInternals, createExposeHandler, createSenderProxy, proxyBuilder, 
// Legacy aliases
RequestProxyHandler, makeProxy, makeRequestProxy } from "./Proxy";
// ============================================================================
// LEGACY CLASSES
// ============================================================================
/**
 * @deprecated Use createRemoteProxy from Proxy.ts instead
 */
export class RequestProxyHandlerV2 {
    hostChannelInstance;
    options;
    _channel;
    constructor(hostChannelInstance = null, options = {}) {
        this.hostChannelInstance = hostChannelInstance;
        this.options = options;
        this._channel = getWorkerChannel();
    }
    dispatch(action, args) {
        const targetChannel = this.options?.connectChannel ?? "worker";
        const path = args?.[1] ?? [];
        return this._channel.invoke(targetChannel, action, path, args.slice(2) ?? []);
    }
}
/**
 * @deprecated Use createRemoteProxy from Proxy.ts instead
 */
export class ObservableRequestProxyHandler extends RequestProxyHandlerV2 {
}
// ============================================================================
// LEGACY FACTORY FUNCTIONS
// ============================================================================
/**
 * @deprecated Use UnifiedChannel.proxy() instead
 */
export const wrapChannel = (connectChannel, host = null) => {
    const channel = getWorkerChannel();
    return channel.proxy(connectChannel);
};
/**
 * @deprecated Use UnifiedChannel.proxy() instead
 */
export const wrapObservableChannel = (channelObs, connectChannel, options = {}) => wrapChannel(connectChannel, null);
/**
 * @deprecated Use UnifiedChannel.wrapDescriptor() instead
 */
export const makeObservableRequestProxy = (descriptor, channelObs, options = {}) => {
    const channel = getWorkerChannel();
    return channel.wrapDescriptor(descriptor, descriptor?.channel ?? options?.connectChannel);
};
/**
 * @deprecated Use createUnifiedChannel instead
 */
export function createObservableChannel(transport, channelName) {
    const channel = createUnifiedChannel({ name: channelName, autoListen: false });
    channel.connect(transport, { targetChannel: channelName });
    return {
        observable: channel,
        wrap: (connectChannel, opts) => channel.proxy(connectChannel),
        subscribe: (obs) => channel.subscribe(obs),
        send: (msg) => channel.next(msg),
        request: (msg) => channel.invoke(channelName, WReflectAction.CALL, [], [msg])
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVxdWVzdFByb3h5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUmVxdWVzdFByb3h5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztHQUtHO0FBRUgsT0FBTyxFQUFFLGNBQWMsRUFBMkIsTUFBTSxvQkFBb0IsQ0FBQztBQUU3RSxPQUFPLEVBQWtCLG9CQUFvQixFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFbkcsc0NBQXNDO0FBQ3RDLE9BQU87QUFVSCxVQUFVO0FBQ1YsWUFBWSxFQUNaLGVBQWU7QUFFZixVQUFVO0FBQ1Ysa0JBQWtCLEVBQ2xCLG9CQUFvQixFQUNwQixZQUFZO0FBRVosb0JBQW9CO0FBQ3BCLGlCQUFpQixFQUNqQixjQUFjLEVBQ2QsYUFBYSxFQUNiLGtCQUFrQixFQUNsQixpQkFBaUIsRUFDakIsbUJBQW1CLEVBQ25CLGlCQUFpQixFQUNqQixZQUFZO0FBRVosaUJBQWlCO0FBQ2pCLG1CQUFtQixFQUNuQixTQUFTLEVBQ1QsZ0JBQWdCLEVBQ25CLE1BQU0sU0FBUyxDQUFDO0FBY2pCLCtFQUErRTtBQUMvRSxpQkFBaUI7QUFDakIsK0VBQStFO0FBRS9FOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHFCQUFxQjtJQUluQjtJQUNBO0lBSkgsUUFBUSxDQUFpQjtJQUVqQyxZQUNXLHNCQUEyQixJQUFJLEVBQy9CLFVBQWUsRUFBRTtRQURqQix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQVk7UUFDL0IsWUFBTyxHQUFQLE9BQU8sQ0FBVTtRQUV4QixJQUFJLENBQUMsUUFBUSxHQUFHLGdCQUFnQixFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVELFFBQVEsQ0FBQyxNQUFzQixFQUFFLElBQVc7UUFDeEMsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxjQUFjLElBQUksUUFBUSxDQUFDO1FBQy9ELE1BQU0sSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDbEYsQ0FBQztDQUNKO0FBRUQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNkJBQThCLFNBQVEscUJBQXFCO0NBQUc7QUFFM0UsK0VBQStFO0FBQy9FLDJCQUEyQjtBQUMzQiwrRUFBK0U7QUFFL0U7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxXQUFXLEdBQUcsQ0FBQyxjQUFzQixFQUFFLE9BQVksSUFBSSxFQUFPLEVBQUU7SUFDekUsTUFBTSxPQUFPLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztJQUNuQyxPQUFPLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBRyxDQUFDLFVBQTZCLEVBQUUsY0FBc0IsRUFBRSxVQUFlLEVBQUUsRUFBTyxFQUFFLENBQ25ILFdBQVcsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFFdEM7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSwwQkFBMEIsR0FBRyxDQUN0QyxVQUE4QixFQUM5QixVQUE2QixFQUM3QixVQUFlLEVBQUUsRUFDZCxFQUFFO0lBQ0wsTUFBTSxPQUFPLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztJQUNuQyxPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxPQUFPLElBQUksT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQzlGLENBQUMsQ0FBQztBQUVGOztHQUVHO0FBQ0gsTUFBTSxVQUFVLHVCQUF1QixDQUNuQyxTQUFvSCxFQUNwSCxXQUFtQjtJQUVuQixNQUFNLE9BQU8sR0FBRyxvQkFBb0IsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDL0UsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUUzRCxPQUFPO1FBQ0gsVUFBVSxFQUFFLE9BQU87UUFDbkIsSUFBSSxFQUFFLENBQUMsY0FBc0IsRUFBRSxJQUFVLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDO1FBQzNFLFNBQVMsRUFBRSxDQUFDLEdBQVEsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUM7UUFDL0MsSUFBSSxFQUFFLENBQUMsR0FBUSxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUNyQyxPQUFPLEVBQUUsQ0FBQyxHQUFRLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDckYsQ0FBQztBQUNOLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlcXVlc3QgUHJveHkgLSBSZS1leHBvcnRzIGZyb20gVW5pZmllZCBQcm94eSBNb2R1bGVcbiAqXG4gKiBAZGVwcmVjYXRlZCBVc2UgUHJveHkudHMgZGlyZWN0bHkgZm9yIG5ldyBjb2RlLlxuICogVGhpcyBmaWxlIGlzIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXG4gKi9cblxuaW1wb3J0IHsgV1JlZmxlY3RBY3Rpb24sIHR5cGUgV1JlZmxlY3REZXNjcmlwdG9yIH0gZnJvbSBcIi4uL3R5cGVzL0ludGVyZmFjZVwiO1xuaW1wb3J0IHR5cGUgeyBDaGFubmVsTWVzc2FnZSwgQ2hhbm5lbE9ic2VydmFibGUgfSBmcm9tIFwiLi4vb2JzZXJ2YWJsZS9PYnNlcnZhYmxlXCI7XG5pbXBvcnQgeyBVbmlmaWVkQ2hhbm5lbCwgY3JlYXRlVW5pZmllZENoYW5uZWwsIGdldFdvcmtlckNoYW5uZWwgfSBmcm9tIFwiLi4vY2hhbm5lbC9VbmlmaWVkQ2hhbm5lbFwiO1xuXG4vLyBSZS1leHBvcnQgZnJvbSB1bmlmaWVkIFByb3h5IG1vZHVsZVxuZXhwb3J0IHtcbiAgICAvLyBUeXBlc1xuICAgIHR5cGUgUHJveHlJbnZva2VyLFxuICAgIHR5cGUgUHJveHlEZXNjcmlwdG9yLFxuICAgIHR5cGUgUHJveHlDb25maWcsXG4gICAgdHlwZSBQcm94eU1ldGhvZHMsXG4gICAgdHlwZSBSZW1vdGVQcm94eSxcbiAgICB0eXBlIEV4cG9zZUhhbmRsZXIsXG4gICAgdHlwZSBQcm94eVNlbmRlcixcblxuICAgIC8vIFN5bWJvbHNcbiAgICBQUk9YWV9NQVJLRVIsXG4gICAgUFJPWFlfSU5URVJOQUxTLFxuXG4gICAgLy8gQ2xhc3Nlc1xuICAgIFJlbW90ZVByb3h5SGFuZGxlcixcbiAgICBEaXNwYXRjaFByb3h5SGFuZGxlcixcbiAgICBQcm94eUJ1aWxkZXIsXG5cbiAgICAvLyBGYWN0b3J5IGZ1bmN0aW9uc1xuICAgIGNyZWF0ZVJlbW90ZVByb3h5LFxuICAgIHdyYXBEZXNjcmlwdG9yLFxuICAgIGlzUmVtb3RlUHJveHksXG4gICAgZ2V0UHJveHlEZXNjcmlwdG9yLFxuICAgIGdldFByb3h5SW50ZXJuYWxzLFxuICAgIGNyZWF0ZUV4cG9zZUhhbmRsZXIsXG4gICAgY3JlYXRlU2VuZGVyUHJveHksXG4gICAgcHJveHlCdWlsZGVyLFxuXG4gICAgLy8gTGVnYWN5IGFsaWFzZXNcbiAgICBSZXF1ZXN0UHJveHlIYW5kbGVyLFxuICAgIG1ha2VQcm94eSxcbiAgICBtYWtlUmVxdWVzdFByb3h5XG59IGZyb20gXCIuL1Byb3h5XCI7XG5cbi8vIFJlLWV4cG9ydCB0eXBlcyBmcm9tIE9ic2VydmFibGVcbmV4cG9ydCB0eXBlIHsgQ2hhbm5lbE1lc3NhZ2UgfTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTEVHQUNZIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhbm5lbFNlbmRlcjxUID0gQ2hhbm5lbE1lc3NhZ2U+IHtcbiAgICBuZXh0KG1lc3NhZ2U6IFQsIHRyYW5zZmVyPzogVHJhbnNmZXJhYmxlW10pOiB2b2lkO1xuICAgIHJlcXVlc3Q/KG1lc3NhZ2U6IFQpOiBQcm9taXNlPGFueT47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExFR0FDWSBDTEFTU0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIGNyZWF0ZVJlbW90ZVByb3h5IGZyb20gUHJveHkudHMgaW5zdGVhZFxuICovXG5leHBvcnQgY2xhc3MgUmVxdWVzdFByb3h5SGFuZGxlclYyIHtcbiAgICBwcml2YXRlIF9jaGFubmVsOiBVbmlmaWVkQ2hhbm5lbDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgaG9zdENoYW5uZWxJbnN0YW5jZTogYW55ID0gbnVsbCxcbiAgICAgICAgcHVibGljIG9wdGlvbnM6IGFueSA9IHt9XG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2NoYW5uZWwgPSBnZXRXb3JrZXJDaGFubmVsKCk7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goYWN0aW9uOiBXUmVmbGVjdEFjdGlvbiwgYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0Q2hhbm5lbCA9IHRoaXMub3B0aW9ucz8uY29ubmVjdENoYW5uZWwgPz8gXCJ3b3JrZXJcIjtcbiAgICAgICAgY29uc3QgcGF0aCA9IGFyZ3M/LlsxXSA/PyBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoYW5uZWwuaW52b2tlKHRhcmdldENoYW5uZWwsIGFjdGlvbiwgcGF0aCwgYXJncy5zbGljZSgyKSA/PyBbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBjcmVhdGVSZW1vdGVQcm94eSBmcm9tIFByb3h5LnRzIGluc3RlYWRcbiAqL1xuZXhwb3J0IGNsYXNzIE9ic2VydmFibGVSZXF1ZXN0UHJveHlIYW5kbGVyIGV4dGVuZHMgUmVxdWVzdFByb3h5SGFuZGxlclYyIHt9XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExFR0FDWSBGQUNUT1JZIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBVbmlmaWVkQ2hhbm5lbC5wcm94eSgpIGluc3RlYWRcbiAqL1xuZXhwb3J0IGNvbnN0IHdyYXBDaGFubmVsID0gKGNvbm5lY3RDaGFubmVsOiBzdHJpbmcsIGhvc3Q6IGFueSA9IG51bGwpOiBhbnkgPT4ge1xuICAgIGNvbnN0IGNoYW5uZWwgPSBnZXRXb3JrZXJDaGFubmVsKCk7XG4gICAgcmV0dXJuIGNoYW5uZWwucHJveHkoY29ubmVjdENoYW5uZWwpO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgVW5pZmllZENoYW5uZWwucHJveHkoKSBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCB3cmFwT2JzZXJ2YWJsZUNoYW5uZWwgPSAoY2hhbm5lbE9iczogQ2hhbm5lbE9ic2VydmFibGUsIGNvbm5lY3RDaGFubmVsOiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IHt9KTogYW55ID0+XG4gICAgd3JhcENoYW5uZWwoY29ubmVjdENoYW5uZWwsIG51bGwpO1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBVbmlmaWVkQ2hhbm5lbC53cmFwRGVzY3JpcHRvcigpIGluc3RlYWRcbiAqL1xuZXhwb3J0IGNvbnN0IG1ha2VPYnNlcnZhYmxlUmVxdWVzdFByb3h5ID0gKFxuICAgIGRlc2NyaXB0b3I6IFdSZWZsZWN0RGVzY3JpcHRvcixcbiAgICBjaGFubmVsT2JzOiBDaGFubmVsT2JzZXJ2YWJsZSxcbiAgICBvcHRpb25zOiBhbnkgPSB7fVxuKTogYW55ID0+IHtcbiAgICBjb25zdCBjaGFubmVsID0gZ2V0V29ya2VyQ2hhbm5lbCgpO1xuICAgIHJldHVybiBjaGFubmVsLndyYXBEZXNjcmlwdG9yKGRlc2NyaXB0b3IsIGRlc2NyaXB0b3I/LmNoYW5uZWwgPz8gb3B0aW9ucz8uY29ubmVjdENoYW5uZWwpO1xufTtcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgY3JlYXRlVW5pZmllZENoYW5uZWwgaW5zdGVhZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT2JzZXJ2YWJsZUNoYW5uZWwoXG4gICAgdHJhbnNwb3J0OiBXb3JrZXIgfCBNZXNzYWdlUG9ydCB8IEJyb2FkY2FzdENoYW5uZWwgfCBXZWJTb2NrZXQgfCBcImNocm9tZS1ydW50aW1lXCIgfCBcInNlcnZpY2Utd29ya2VyLWNsaWVudFwiIHwgXCJzZWxmXCIsXG4gICAgY2hhbm5lbE5hbWU6IHN0cmluZ1xuKSB7XG4gICAgY29uc3QgY2hhbm5lbCA9IGNyZWF0ZVVuaWZpZWRDaGFubmVsKHsgbmFtZTogY2hhbm5lbE5hbWUsIGF1dG9MaXN0ZW46IGZhbHNlIH0pO1xuICAgIGNoYW5uZWwuY29ubmVjdCh0cmFuc3BvcnQsIHsgdGFyZ2V0Q2hhbm5lbDogY2hhbm5lbE5hbWUgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBvYnNlcnZhYmxlOiBjaGFubmVsLFxuICAgICAgICB3cmFwOiAoY29ubmVjdENoYW5uZWw6IHN0cmluZywgb3B0cz86IGFueSkgPT4gY2hhbm5lbC5wcm94eShjb25uZWN0Q2hhbm5lbCksXG4gICAgICAgIHN1YnNjcmliZTogKG9iczogYW55KSA9PiBjaGFubmVsLnN1YnNjcmliZShvYnMpLFxuICAgICAgICBzZW5kOiAobXNnOiBhbnkpID0+IGNoYW5uZWwubmV4dChtc2cpLFxuICAgICAgICByZXF1ZXN0OiAobXNnOiBhbnkpID0+IGNoYW5uZWwuaW52b2tlKGNoYW5uZWxOYW1lLCBXUmVmbGVjdEFjdGlvbi5DQUxMLCBbXSwgW21zZ10pXG4gICAgfTtcbn1cbiJdfQ==